<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ResumeBuilder: Create Your Modern Resume</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { margin:0; font-family:sans-serif; background:#f7f7f9;}
    .container { max-width: 800px; margin: 0 auto; padding: 1.5rem;}
    .step { margin-bottom: 2rem; }
    .templates-list { display: flex; flex-wrap: wrap; gap: 16px; justify-content:center;}
    .template-thumb { border:2px solid #eee; border-radius:8px; cursor:pointer; width: 130px; padding:10px; transition:.2s; background:#fff; }
    .template-thumb.selected, .template-thumb:hover { border-color:#1976d2; }
    .fields-section { margin-bottom:1.5rem;}
    .fields-section label { display:block; font-weight:600; margin-bottom:8px;}
    .row { display:flex; gap:1rem }
    .resume-preview { background:#fff; padding:1.5rem; border-radius:8px; box-shadow:0 2px 8px #aaa2;}
    .actions { display:flex; gap:1rem; margin-top:1rem; }
    @media (max-width: 600px) {
      .container { max-width: 99vw; padding:.8rem;}
      .resume-preview { padding:.8rem;}
      .fields-section { margin-bottom:.8rem;}
      .row { flex-direction:column; gap:0; }
      .templates-list { gap:8px;}
      .template-thumb { padding:5px; width: 100px;}
    }
    .pdf-overlay {position:fixed;top:0;left:0;right:0;bottom:0;z-index:99;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:bold;}
    .progressbar { width:100%;background:#ececec;height:8px;border-radius:5px; margin:1rem 0;}
    .progress {height:8px; background:#1976d2;border-radius:5px;transition:width .2s;}
    .disabled { opacity:.6; pointer-events:none; }
  </style>
</head>
<body>
<div id="root"></div>
<!-- React, Babel, jsPDF CDNs -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script type="text/babel">

const TEMPLATES = [
  // Example with placeholder SVG thumbnails, replace with your image or SVG code
  {id:'sean', name:'Sean Bernard', supportsPhoto:true, color:'#24b3a9', 
    render:(data) => <div style={{padding:'1rem',color:'#333'}}>
      <div style={{background:'#24b3a9',height:30,marginBottom:20}} />
      {data.photo && <img src={data.photo} style={{width:80, borderRadius:12, float:'right', marginLeft:12}} />}
      <h2 style={{marginBottom:4}}>{data.name || '[Your Name]'}</h2>
      <div style={{color:'#666'}}>{data.title}</div>
      <div style={{margin:'20px 0'}}>{data.summary}</div>
      <h4 style={{color:'#24b3a9'}}>Experience</h4>
      <ul>{(data.experience||[]).map((exp,i) => <li key={i}>{exp.role}, {exp.company} ({exp.year})</li>)}</ul>
      <h4 style={{color:'#24b3a9'}}>Education</h4>
      <ul>{(data.education||[]).map((e,i)=><li key={i}>{e.degree} - {e.school} ({e.year})</li>)}</ul>
      <h4 style={{color:'#24b3a9'}}>Skills</h4>
      <div>{(data.skills||[]).join(', ')}</div>
    </div>
  },
  // Add your 3 other supplied templates and style as per image, plus 6 more as code/inline-SVG
  // ...
  {id:'modern', name:'Modern Corporate', supportsPhoto:false, color:'#1976d2', 
    render:(data)=><div style={{borderLeft:'10px solid #1976d2', padding:'1rem',color:'#333'}}>
      <h2 style={{color:'#1976d2'}}>{data.name || '[Your Name]'}</h2>
      <div style={{fontWeight:600}}>{data.title}</div>
      <hr /><b>Summary:</b> {data.summary}
      <hr /><b>Work:</b> <ul>{(data.experience||[]).map((exp,i) => <li key={i}>{exp.role}, {exp.company} ({exp.year})</li>)}</ul>
      <hr /><b>Education:</b> <ul>{(data.education||[]).map((e,i)=><li key={i}>{e.degree} - {e.school} ({e.year})</li>)}</ul>
      <hr /><b>Skills:</b> {(data.skills||[]).join(', ')}
    </div>
  },
  // ...define all 10 templates
];

function App() {
  const [step, setStep] = React.useState(1);
  const [selected, setSelected] = React.useState(null);
  const [data, setData] = React.useState({
    name:'', title:'', summary:'', 
    experience:[{role:'',company:'',year:''}], 
    education:[{degree:'',school:'',year:''}], 
    skills:[], photo:null
  });
  const [generating, setGenerating] = React.useState(false);

  // --- Handlers for fields ---
  function updateField(field, value) { setData(prev=>({...prev,[field]:value})); }
  function addExp() { setData(prev=>({...prev,experience:[...prev.experience,{role:'',company:'',year:''}]})); }
  function addEdu() { setData(prev=>({...prev,education:[...prev.education,{degree:'',school:'',year:''}]})); }
  function removeExp(i){ setData(prev=>({...prev,experience:prev.experience.filter((_,ix)=>ix!==i)}));}
  function removeEdu(i){ setData(prev=>({...prev,education:prev.education.filter((_,ix)=>ix!==i)}));}
  function updateExp(i,f,v){ setData(prev=>({...prev,experience:prev.experience.map((e,ix)=>ix===i?{...e,[f]:v}:e)})); }
  function updateEdu(i,f,v){ setData(prev=>({...prev,education:prev.education.map((e,ix)=>ix===i?{...e,[f]:v}:e)})); }
  function onPhoto(e) { 
    const file = e.target.files[0];
    if(file) {
      const reader = new FileReader();
      reader.onload = _=> updateField('photo', reader.result);
      reader.readAsDataURL(file);
    }
  }

  function stepNext() { if(step<3) setStep(step+1);}
  function stepBack() { if(step>1) setStep(step-1);}
  const tmpl = TEMPLATES.find(t=>t.id===selected);

  // --- PDF Export ---
  async function exportPDF() {
    setGenerating(true);
    setTimeout(()=>{
      const doc = new window.jspdf.jsPDF();
      doc.html(document.getElementById("final-preview"),{
        callback: function (doc) {
          doc.save(`${(data.name||'my')}-resume.pdf`);
          setGenerating(false);
        },
        x: 10, y: 10, width: 185,windowWidth:785
      });  
    },500);
  }

  // --- Step screens ---
  return <div className="container">
    <h2 style={{textAlign:'center',marginTop:'1rem', color:'#1976d2'}}>ResumeBuilder</h2>
    <div className="progressbar">
      <div className="progress" style={{width:`${step*33.3}%`}}></div>
    </div>
    <div style={{textAlign:'center', margin:"1rem 0 2rem"}}>Step {step} of 3</div>
    {step===1 && (
      <div className="step">
        <h3>Select Your Resume Template</h3>
        <div className="templates-list">
          {TEMPLATES.map((t,i)=> (
            <div key={t.id}
              className={`template-thumb${selected===t.id?' selected':''}`}
              onClick={()=>setSelected(t.id)}
            >
              <div style={{height:60, background:t.color, borderRadius:4,marginBottom:5}}/>
              <div>{t.name}</div>
              {t.supportsPhoto && <div style={{fontSize:12, color:'#666'}}>Photo</div>}
            </div>
          ))}
        </div>
        <div className="actions" style={{justifyContent:'center'}}>
          <button disabled={!selected} onClick={stepNext}>Next Step</button>
        </div>
      </div>
    )}
    {step===2 && tmpl && (
      <div className="step">
        <h3>Enter Your Resume Info</h3>
        <div className="fields-section">
          <label>Full Name *</label>
          <input value={data.name} onChange={e=>updateField('name', e.target.value)} style={{width:'100%'}} required />
        </div>
        <div className="fields-section">
          <label>Title/Headline</label>
          <input value={data.title} onChange={e=>updateField('title', e.target.value)} style={{width:'100%'}} />
        </div>
        <div className="fields-section">
          <label>Professional Summary</label>
          <textarea value={data.summary} onChange={e=>updateField('summary', e.target.value)} rows={3} style={{width:'100%'}} />
        </div>
        <div className="fields-section">
          <label>Work Experience</label>
          {data.experience.map((e,i)=>(
            <div key={i} className="row">
              <input placeholder="Role" value={e.role} onChange={ev=>updateExp(i,'role',ev.target.value)}/>
              <input placeholder="Company" value={e.company} onChange={ev=>updateExp(i,'company',ev.target.value)}/>
              <input placeholder="Year" value={e.year} onChange={ev=>updateExp(i,'year',ev.target.value)}/>
              {data.experience.length>1 && <button onClick={()=>removeExp(i)}>-</button>}
            </div>
          ))}
          <button onClick={addExp}>Add Experience</button>
        </div>
        <div className="fields-section">
          <label>Education</label>
          {data.education.map((e,i)=>(
            <div key={i} className="row">
              <input placeholder="Degree" value={e.degree} onChange={ev=>updateEdu(i,'degree',ev.target.value)}/>
              <input placeholder="School" value={e.school} onChange={ev=>updateEdu(i,'school',ev.target.value)}/>
              <input placeholder="Year" value={e.year} onChange={ev=>updateEdu(i,'year',ev.target.value)}/>
              {data.education.length>1 && <button onClick={()=>removeEdu(i)}>-</button>}
            </div>
          ))}
          <button onClick={addEdu}>Add Education</button>
        </div>
        <div className="fields-section">
          <label>Skills (comma separated)</label>
          <input value={data.skills.join(', ')} 
                 onChange={e=>updateField('skills', (e.target.value||'').split(',').map(s=>s.trim()).filter(Boolean))}
                 style={{width:'100%'}} />
        </div>
        {tmpl.supportsPhoto && (
          <div className="fields-section">
            <label>Upload Photo (optional)</label>
            <input type="file" accept="image/*" onChange={onPhoto}/>
            {data.photo && <img src={data.photo} alt="profile" style={{width:54,marginTop:8,borderRadius:8}} />}
          </div>
        )}
        <div className="actions">
          <button onClick={stepBack}>Prev</button>
          <button disabled={!data.name.trim()} onClick={stepNext}>Next Step</button>
        </div>
      </div>
    )}
    {step===3 && tmpl && (
      <div className="step">
        <h3>Preview & Download PDF</h3>
        <div id="final-preview" className="resume-preview" style={{marginBottom:16, minHeight:320}}>
          {tmpl.render(data)}
        </div>
        <div className="actions">
          <button onClick={stepBack}>Back</button>
          <button onClick={exportPDF} disabled={!data.name.trim()}>Download PDF</button>
        </div>
      </div>
    )}
    {generating && <div className="pdf-overlay">Generating PDF...</div>}
    <footer style={{marginTop:"3rem", fontSize:13,textAlign:'center',color:'#888'}}>Made with ❤️ | ATS & Mobile-Ready Resume Tool (2025)</footer>
  </div>
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
